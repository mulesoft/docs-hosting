= Viewing Log Data for Deployed Apps
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

include::partial$feature-availability.adoc[tag=featureUnavailable]


*THIS IS PLACEHOLDER CONTENT BASED ON THE DESIGN SPEC UNTIL THE UI IS AVAILABLE* 

*Will this just be a button to DOWNLOAD logs?*

*Last update* 11-Jan-22

////
FC: replica, levels, time filters
GA: thread dumps: trigger, view, prev/next message nav, config menu sort
////

CloudHub 2.0 provides access to log data that includes deployment messages and events for each replica and Mule runtime engine logs.

For more advanced searching and log management, you can use Anypoint Monitoring (requires Titanium subscription).
See https://docs.mulesoft.com/monitoring/[Anypoint Monitoring Overview^] (Link out from Beta docs).

CloudHub 2.0 stores up to 150 MB of log data per config, or up to 30 days, whichever limit is reached first.


[NOTE]
CloudHub 2.0 stores log data in Universal Time (UTC); however, the console displays the log using your computer's local time zone.

== View Logs

To view logs for applications deployed to a private space:

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectAppsPage]
. Click the application name.
. In the navigation menu, click *Logs*.
+
--
The logs page displays all logs for all replicas for the selected config,
with the latest messages at the bottom.
The config represents the deployment since the last update.

[NOTE]
When you update an application, a new configuration is created.
In this case, the logs page might be empty.

The page streams log messages as they occur, unless the last deployed section is closed.
Logs from before the last updated time appear in the previous deployments section.

Each message includes the severity, time (relative and absolute), and replica name.

* To open the currently selected deployment in Anypoint Monitoring, click *View in Monitoring*.
* To view logs for past deployments, click the *Past deployments* dropdown and select the deployment.
* To view logs for a different config, click the *Config* dropdown and select the config.

The config label indicates the relative time of deployment, such as 10 hours ago.

<screenshot>
// +
// .The arrow shows the dropdown to filter log output by deployment.
// image::ch2-logs-deploy.png[Filter log output by deployment]
-- 

== Search Logs

To search within the currently displayed config:

. Enter the search term in the *Search* field and press Enter.
+
The results display includes the currently selected config, replica,
and log levels.
+
To change any of these elements, click *<- Search Results* to exit the search results.
. Click the next <icon> and previous <icon> buttons to navigate the search results:
+
<screenshot>
. Click a log message to view it in context.
+
Click *Search Results* to return to the search results.


== Filter Logs

* Filter logs by config ID
+
Click the *Config* dropdown and select the config to view:
+
<screenshot>
// +
// .The arrow shows the dropdown to filter log output by deployment.
// image::ch2-logs-deploy.png[Filter log output by deployment]

* *Filter log by replica*
+
Hover over a log message and select *Hide Others*:
+
<screenshot>
+
To clear the replica filter, click the *x* for the selected replica.

* *Filter logs by time date and time range*
+
Click *Time Range*, select the date range, and optionally time, and click *Apply*.
+
Alternatively, click *Show Latest Messages*:
+
<screenshot>
+
The button label changes to show the selected date and time range.

* *Filter logs by log level*
+
Click *Log Levels* and check the log levels to display:
+
--
** *Fatal*: Fatal messages for when an application fails
** *Error*: Error messages, such as when an exception occurs
** *Warn*: Warning messages
** *Info*: Informative messages
** *Debug*: Debugging messages
--
+
[NOTE]
Some log levels might not be available depending on the dynamic log level setting for the deployment.
+
The *Log Levels* button changes to show the selected number of log levels.


== Download Logs

To download logs based on the current filters, click the download (<icon>) button:

<screenshot>

// .The arrow shows the Download icon to download log output.
// image::ch2-logs-download.png[Download log output]

CloudHub 2.0 downloads the log output, using the current filters, to a text file in the format `__configID__.-__Replica__.log`.
Use a text editor to view the log file.

//// 

== Download Mule Logs

Mule logs display the logs of the Mule runtime engine for CloudHub 2.0.
The Mule log contains information about app and lifecycle events.
For example, the log records an entry when a Mule service or app starts, deploys, stops, or undeploys.

 . In the *Deployments* section, select the date and worker for which you want to download Mule logs.
 . Click the download icon for the worker and select *Mule Logs*:
+
.The arrow shows the icon to download Mule log output by deployment in the *Deployments* section.
image::ch2-logs-mule-download.png[Download Mule log output in the Deployments section]

CloudHub downloads the Mule log output to a text file in the format `__appName__-instance-__instanceID__-__workerNumber__-mule_ee.log`.
Use a text editor to view the log file.

For more information about Mule logs, see xref:mule-runtime::logging-in-mule.adoc#runtime-log[Runtime Log^].

== Deployment History Persistence

CloudHub stores up to 30 days of inactive deployments history based on the last modified time of the deployment.

== Search Logs

Search for logs that contain specified values or search for logs by date and priority.


To search logs:

. Enter a value in the search box, or click *Advanced* to search for logs for a specified time, day, date range, and message priority.
. Click *Apply*.
+
.The screenshot shows (*1*) *Advanced* search and (*2*) *Priority* on the *Logs* page.
image::ch2-logs-search-adv.png[Display Advanced search and Priority on the Logs page]

=== Search by Date and Time

The *Date & Time* filter lets you search the log by specifying a date range. Possible values are:

* *Last hour*
* *Last 24 hours*
* *Last week*
* *Last month*


=== Wildcard Searching

You can filter log data by entering search terms into the search box at the top of the log page that match results in the log message.

You can also search for an exact term in the log message with a few common quantifiers for wildcard searching:

* `?` matches zero or one of the preceding elements.
* `&#8727;` matches zero or more of the preceding elements.

//// 


== See Also

* xref:ch2-view-diag.adoc[]
* xref:ch2-update-apps.adoc[]