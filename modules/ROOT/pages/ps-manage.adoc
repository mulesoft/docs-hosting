= Manage Private Spaces
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Use Anypoint Runtime Manager to manage private spaces,
such as adding and removing a route from the route table or
detaching a transit gateway from the private space.

== Rename a Private Space

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
include::partial$select-private-space.adoc[tag=clickPrivateSpaceName]
. Click the Private Space menu (*...*) and select *Rename*.
include::partial$select-private-space.adoc[tag=renameItem]

== Delete a Private Space

Deleting a private space also deletes any related private networks, VPNs, and files.
You can't undo this action.

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
include::partial$select-private-space.adoc[tag=clickPrivateSpaceName]
. Click the Private Space menu (*...*) and select *Delete*:
image::ps-delete.png[Delete option in the Private Space menu]

. Click *Delete* to confirm the deletion.

== Delete a Private Network 

Deleting a private network also deletes its VPN.
You can't undo this action.

You can't delete a network if it is currently in use.

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the private network you want to delete.
. On the *Network* tab, click the Private Network menu (*...*) and select *Delete*:
+
image::private-network-delete.png[Delete option in the Private Network menu]
. Click *Delete* to confirm the deletion.

== Add or Remove a Route in the Route Table

Routes determine how to direct traffic from your private space, for example,
to the public internet or through a transit gateway.

You might want to add a route to enable a new subnet to be accessible or remove a route if you no longer want a subnet to be accessible through the transit gateway.

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the transit gateway attachment
to add routes to.
. On the *Network* tab, in the *Connections* section, click the transit gateway or VPN menu (*...*) and select *Edit Routes*:
+
<screenshot>
// image::tgw-add-vpc-route.png[Add VPC route]
+
--
** Add a route by entering the subnet in CIDR notation, selecting the connection,
and clicking *Add Route*:
+
<screenshot>
// image::ps-edit-route.png[Route Table window]
** Remove a route by clicking the *X* icon for a row in the table:
+
<screenshot>
// image::ps-edit-route.png[Route Table window]
--
. Click *Save*.

Anypoint Platform submits the new route to AWS.

//// 
In the route table, added routes show *Transit Gateway* as the value in the *Next Hop* column:
image::tgw-route-added.png[Transit Gateway in the Next Hop column of the route table]
//// 


== Rename a Connection

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the connection you want to rename.
. On the *Network* tab, in the *Connections* section, click the Connections menu (*...*) and select *Rename*:
+
image::connection-rename.png[Rename option in the Connections menu]
include::partial$select-private-space.adoc[tag=renameItem]


== Rename a VPN

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the VPN you want to rename.
. On the *Network* tab, in the *Connections* section, click the VPN menu (*...*) and select *Rename*:
+
image::vpn-rename.png[Rename option in the VPN menu]
include::partial$select-private-space.adoc[tag=renameItem]


== View VPN Status

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the VPN you want to view.
. On the *Network* tab, in the *Connections* section, click the VPN menu (*...*) and select *View Details*:
+
image::vpn-view-details.png[View Details option in the VPN menu]
. Click *X* to close the *VPN Details* window.

== Delete a VPN  

You can't undo this action.

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the VPN you want to delete.
. On the *Network* tab, in the *Connections* section, click the VPN menu (*...*) and select *Delete*:
+
image::vpn-delete.png[Delete option in the VPN menu]
. Click *Delete* to confirm the deletion.

== Rename a Transit Gateway Attachment 

You might want to rename a transit gateway attachment to match the attachment name in AWS. 

To rename a transit gateway attachment:

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the transit gateway attachment
that you want to rename.
. On the *Network* tab, in the *Connections* section, click the transit gateway menu (*...*) and select *Rename*:
+
<screenshot>
// image::tgw-rename.png[Rename option in the transit gateway menu]
include::partial$select-private-space.adoc[tag=renameItem]


== Detach a Transit Gateway from the Private Space

You might need to detach a transit gateway so that you can reattach it.

Detaching a transit gateway from a private space also deletes the attachment in AWS.
The resource share on AWS remains unaffected.
Any apps deployed to the private space continue to run, but they are no longer connected to your Amazon VPCs and VPNs.

To detach the transit gateway:

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the transit gateway
that you want to detach.
. On the *Network* tab, in the *Connections* section, click the transit gateway menu (*...*) and select *Detach*:
+
<screenshot>
// image::tgw-detach-vpc.png[Detach transit gateway option in the transit gateway menu]
. At the confirmation prompt, click *Detach*.
+
Detaching a transit gateway might take several minutes.

== Remove a Transit Gateway Attachment

You might want to remove a transit gateway attachment for the following reasons:

* If you reject an attachment in AWS, the transit gateway attachment appears as `Rejected` in Anypoint Platform.
In this case, you must remove the attachment before trying to attach it again.
* If an attachment is deleted on AWS, you can remove the attachment from Anypoint Platform.

Removing a transit gateway attachment also deletes any associate routes.
The resource share on AWS remains unaffected so you can readd the transit gateway without creating a new one.

To completely remove the transit gateway from your Anypoint Platform organization, 
delete the resources share on AWS.
For information, see https://docs.aws.amazon.com/ram/latest/userguide/working-with-sharing.html#working-with-sharing-delete[Delete a resource share^] in the AWS documentation.

To remove a transit gateway attachment:

//SELECT PRIVATE SPACE SHARED
include::partial$select-private-space.adoc[tag=selectPrivateSpace]
. Click the name of the private space that includes the transit gateway
that you want to detach.
. On the *Network* tab, in the *Connections* section, click the transit gateway menu (*...*) and select *Remove*:
+
// image::tgw-remove-vpc.png[Remove transit gateway attachment option in the transit gateway menu]
. At the confirmation prompt, click *Remove*.
+
Removing a transit gateway attachment might take several minutes.

== See Also 

* xref:tgw-troubleshoot.adoc[Troubleshoot Transit Gateway Attachments]
* https://docs.aws.amazon.com/ram/latest/userguide/working-with-sharing.html#working-with-sharing-delete[Delete a resource share^] in the AWS documentation
